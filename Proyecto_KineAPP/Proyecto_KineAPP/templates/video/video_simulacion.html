{% extends "admin/base_site.html" %} 
{% load static %}
{% block content %}
  <style>
    :root{
      --ucn-blue-900:#003366;
      --ucn-blue-700:#005AA7;
      --ucn-blue-50:#E6F2FF;
      --white:#FFFFFF;
      --gray-100:#F5F5F5;
      --gray-200:#ECECEC;
      --gray-600:#4D4D4D;
      --shadow:0 8px 24px rgba(0,0,0,.08);
      --radius:16px;
      --content-max:1200px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:"Inter","Roboto","Open Sans",system-ui;background:linear-gradient(180deg,var(--ucn-blue-50),var(--white));color:var(--gray-600)}

    .layout{max-width:var(--content-max);margin:0 auto;padding:20px;display:flex;flex-direction:column;gap:20px;align-items:center}

    .header-case{text-align:center;background:#fff;border:1px solid var(--gray-200);border-radius:var(--radius);padding:12px 20px;box-shadow:var(--shadow);width:100%;max-width:800px}
    .header-case h1{margin:0;color:var(--ucn-blue-900);font-size:1.5rem}
    .header-case p{margin:4px 0;color:#555;font-size:0.95rem}
    .titulo-centrado {text-align: center}

    .video-box{text-align: center}
    .video-container-center {display: block; margin: 0 auto; text-align: center; 
}

/* Opcionalmente, si el iframe no se centra, podemos forzar el centrado en el iframe en sí: */
.video-container-center iframe {
    display: block;
    margin: 0 auto;
}

    .button-bar{display:flex;justify-content:center;gap:12px;margin-top:16px;flex-wrap:wrap}
    .btn{padding:12px 20px;border-radius:12px;border:1px solid var(--ucn-blue-700);background:#fff;color:var(--ucn-blue-900);font-weight:700;cursor:pointer;box-shadow:var(--shadow);min-width:120px;text-align:center;transition:background .3s}
    .btn:hover{background:var(--ucn-blue-50)}
    .btn.active{background:var(--ucn-blue-700);color:#fff}

    .content-window{width:100%;max-width:800px;background:#fff;border:1px solid var(--gray-200);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;margin-top:20px;min-height:220px;animation:fadeIn .3s ease}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}

    .topics-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;width:100%;max-width:500px;margin:auto}
    .topic-btn{padding:16px;border-radius:12px;border:1px solid var(--ucn-blue-700);background:var(--ucn-blue-50);color:var(--ucn-blue-900);font-weight:700;text-align:center;cursor:pointer;box-shadow:var(--shadow)}
    .topic-btn:hover{background:#fff}

    .topic-label{display:inline-block;background:var(--ucn-blue-700);color:#fff;padding:6px 12px;border-radius:8px;font-size:0.9rem;margin-bottom:10px;box-shadow:var(--shadow)}

    .question-list{list-style:none;padding:0;margin-top:12px;width:100%;max-width:600px}
    .question-list li{margin-bottom:10px;background:var(--gray-100);padding:10px;border-radius:10px;cursor:pointer;transition:background .3s}
    .question-list li:hover{background:var(--ucn-blue-50)}

    .feedback{margin-top:16px;padding:12px;background:#E8F4FF;border-left:4px solid var(--ucn-blue-700);border-radius:8px;color:#003366}

    .summary-topic{margin-bottom:20px}
    .summary-topic h3{color:var(--ucn-blue-900);margin-bottom:8px;border-bottom:2px solid var(--ucn-blue-700);padding-bottom:4px}

    .summary-list{list-style:none;padding:0;margin:0;width:100%;max-width:600px}
    .summary-list li{margin-bottom:10px;padding:10px;border-radius:10px;border:1px solid var(--gray-200);display:flex;align-items:center;gap:8px}
    .correct{color:green;text-decoration:none}
    .incorrect{color:red;text-decoration:line-through}

    .form-ficha label{display:block;margin:8px 0 4px;font-weight:600}
    .form-ficha input, .form-ficha textarea{width:100%;padding:8px;border:1px solid var(--gray-200);border-radius:8px;margin-bottom:8px}
  </style>

  <div class="layout">
    

    
    <div class="container py-4">
        
    <h1 class="titulo-centrado">{{ video.titulo }}</h1>

    <div class="video-container">
        <div class="video-container-center">
        <iframe width="560" height="315"
        src="{{ video.embed_url }}"   
        
        title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen>
        </iframe>
        </div>
    </div>
    
    </div>    

    <div class="button-bar">
      <div class="btn active" data-section="resumen">Resumen</div>
      <div class="btn" data-section="preguntas">Preguntas</div>
      <div class="btn" data-section="topicos">Tópicos</div>
      <div class="btn" data-section="diagnostico">Diagnóstico</div>
      <div class="btn" data-section="ficha">Ficha Médica</div>
    </div>

    <div id="contentWindow" class="content-window"></div>
  </div>

<div class="container py-4">

  
<!-- MODAL BACKDROP -->
<div id="fichaModal" 
     style="position:fixed; inset:0; background:rgba(0,0,0,.45);
            display:none; justify-content:center; align-items:center; 
            z-index:9999;">

    <!-- MODAL CONTENT -->
    <div style="
        background:white; 
        width:75vw;            /* 75% del ancho */
        max-width:850px;       /* tope opcional */
        height:75vh;           /* 75% del alto */
        padding:24px;
        overflow-y:auto;       /* scroll interno si es necesario */
        border-radius:18px; 
        box-shadow:0 10px 30px rgba(0,0,0,0.2);
        animation:modalFade .25s ease;">
        
        <h2 style="color:#003366; margin-top:0; font-weight:700;">
            Registrar paciente
        </h2>

        <form method="post" action="{% url 'crear_ficha_paciente' video.pk %}"
              style="display:flex; flex-direction:column; gap:16px;">

            {% csrf_token %}
            
            <div style="display:flex; flex-direction:column; gap:10px;">
                {{ form.as_p }}
            </div>

            <div style="display:flex; justify-content:flex-end; gap:10px;">

                <!-- Botón cerrar -->
                <button type="button" id="closeFichaModal"
                        style="padding:10px 18px; background:#ccc; color:#333; 
                               border:none; border-radius:10px; cursor:pointer;">
                    Cancelar
                </button>

                <!-- Botón guardar -->
                <button type="submit"
                        style="padding:10px 18px; background:#005AA7; color:white; 
                               border:none; border-radius:10px; cursor:pointer;">
                    Guardar
                </button>
            </div>

        </form>
    </div>
</div>

<!-- ANIMACIÓN DEL MODAL -->
<style>
@keyframes modalFade {
  from { opacity:0; transform:translateY(-10px); }
  to   { opacity:1; transform:translateY(0); }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const fichaBtn = document.querySelector("[data-section='ficha']");
    const modal = document.getElementById("fichaModal");
    const closeBtn = document.getElementById("closeFichaModal");

    fichaBtn.addEventListener("click", () => {
        modal.style.display = "flex";
    });

    closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
    });

    // Cerrar si clickea fondo
    modal.addEventListener("click", (e) => {
        if(e.target === modal){
            modal.style.display = "none";
        }
    });
});
</script>
</div>


</div>



{% endblock %}